# Arch Linux 自动备份脚本

这是一个用于Arch Linux系统的自动备份脚本，可以备份系统配置、用户配置、自定义路径、软件包列表和系统日志。

## 功能特点

- 备份系统配置文件（/etc目录）
- 备份用户配置文件（可自定义列表）
- 备份自定义路径
- 备份已安装软件包列表
- 备份系统日志
- 支持压缩备份（gzip, bzip2, xz）
- 支持差异备份（只备份变化的文件）
- 支持备份验证
- 可配置的备份目录结构
- 灵活的备份选项
- 增强的错误处理机制
- 备份进度显示
- 并行备份功能
- 全面的依赖性检查

## 版本历史

- 3.0 版本：支持可配置的备份目录结构、可自定义的用户配置文件列表、灵活的备份选项
- 4.0 版本：优化日志显示和排除项
- 5.0 版本：可自定义的备份路径
- 5.1 版本：增强的错误处理机制（自动重试、文件完整性检查、恢复点功能）
- 5.2 版本：备份进度显示（支持进度条或百分比显示）
- 5.3 版本：并行备份功能（支持多任务同时执行，提高备份速度）
- 5.4 版本：依赖性检查增强（更全面地检查所有必要的依赖项，包括版本检查）
- 5.5 版本：备份测试恢复功能（测试备份文件的可恢复性，确保备份可以正确恢复）

## 使用方法

1. 克隆仓库或下载脚本
2. 赋予脚本执行权限：`chmod +x arch-backup.sh`
3. 运行脚本：`./arch-backup.sh`

## 配置文件

首次运行脚本会在 `~/.config/arch-backup.conf` 创建默认配置文件，可以根据需要修改配置。

## 依赖项

- rsync：用于文件同步
- pacman：Arch Linux包管理器
- journalctl：日志查看工具
- tar：归档工具
- 压缩工具（可选）：gzip, bzip2, xz
- pv（可选）：用于显示进度条
- GNU Parallel（可选）：用于并行备份
- 网络工具（可选）：ssh, scp, curl（如启用网络备份）
- 加密工具（可选）：gpg, openssl（如启用加密备份）
- 测试工具（可选）：diff, cmp（如启用恢复测试）